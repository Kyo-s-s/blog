<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Hugo 0.68.3" />
    
    <link rel="canonical" href="https://Kyo-s-s.github.io/blog/posts/abc_247/" />
    <meta name="description" content="A hugo site using Edidor. &lt;br/&gt;&lt;br/&gt; Ctrl&#43;B toggle sidebar. ">
    

    <title>ABC 247 参加記 &middot; Kyo&#39;s blog</title>

    <link rel="shortcut icon" href="https://Kyo-s-s.github.io/blog/images/favicon.ico" />

    <link rel="stylesheet" href="https://Kyo-s-s.github.io/blog/css/main.css" />
    
        
        <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/atom-one-light.min.css">
        
    
    
    
    <link rel="stylesheet" href="https://Kyo-s-s.github.io/blog/css/custom.css">
    
</head>


<body class="loading light-mode">
    
<div class="top">
    <img class="logo" src="https://Kyo-s-s.github.io/blog/images/logo.svg" alt="logo" />
</div>
<div class="bottom">
    <img class="logo" src="https://Kyo-s-s.github.io/blog/images/logo.svg" alt="logo" />
</div>

    <header class="header">
    <ul class="menu clearfix control">
        
<li class="logo-container logo-light">
    <a href="https://Kyo-s-s.github.io/blog/" class="btn logo-link">
        <img class="logo" src="https://Kyo-s-s.github.io/blog/images/logo_light.svg" alt="logo" />
    </a>
</li>


<li class="logo-container logo-default">
    <a href="https://Kyo-s-s.github.io/blog/" class="btn logo-link">
        <img class="logo" src="https://Kyo-s-s.github.io/blog/images/logo.svg" alt="logo" />
    </a>
</li>

        
        
        
        
        <li 
            class="">
            <a class="btn" id="theme-switcher-button">
                Article
            </a>
            <ul class="sub-menu control">
                
                <li class="">
                    <a href="https://Kyo-s-s.github.io/blog/posts"
                    
                        class="btn "
                    >Posts</a>
                </li>
                
                <li class="">
                    <a href="https://Kyo-s-s.github.io/blog/tags"
                    
                        class="btn "
                    >Tags</a>
                </li>
                
                <li class="">
                    <a href="https://Kyo-s-s.github.io/blog/categories"
                    
                        class="btn "
                    >Categories</a>
                </li>
                
            </ul>
        </li>
        
        
        
        
        <li 
            class="">
            <a class="btn" id="theme-switcher-button">
                View
            </a>
            <ul class="sub-menu control">
                
                <li class="">
                    <a href="#"
                    
                        class="btn toggle-sidebar"
                    >Toggle Sidebar</a>
                </li>
                
            </ul>
        </li>
        
        
        
        
        <li  id="theme-switcher" 
            class="">
            <a class="btn" id="theme-switcher-button">
                Theme
            </a>
            <ul class="sub-menu control">
                
                <li class="">
                    <a href="#"
                    
                        
                        data-theme="light" class="btn"
                        
                    >Light</a>
                </li>
                
                <li class="">
                    <a href="#"
                    
                        
                        data-theme="dark" class="btn"
                        
                    >Dark</a>
                </li>
                
                <li class="">
                    <a href="#"
                    
                        
                        data-theme="wild" class="btn"
                        
                    >Wild</a>
                </li>
                
            </ul>
        </li>
        
        
    </ul>
</header>

    <div class="middle">
        <nav class="sidebar">
            <ul class="posts control">
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_262/'><i class="icon icon-post"></i>ABC 262 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/icpc2022/'><i class="icon icon-post"></i>ICPC2022 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_256/'><i class="icon icon-post"></i>ABC 256 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_255/'><i class="icon icon-post"></i>ABC 255 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_253/'><i class="icon icon-post"></i>ABC 253 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_252/'><i class="icon icon-post"></i>ABC 252 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_251/'><i class="icon icon-post"></i>ABC 251 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/ketadp/'><i class="icon icon-post"></i>桁DPを理解する</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_249/'><i class="icon icon-post"></i>ABC 249 参加記</a></li>
    
    <li><a class="no-break btn" href='https://Kyo-s-s.github.io/blog/posts/abc_248_c/'><i class="icon icon-post"></i>ABC 248 C Dice Sum 考察</a></li>
    
</ul>

        </nav>
        <main class="main">
            <article class="article">
    <h2 class="title"><a href='https://Kyo-s-s.github.io/blog/posts/abc_247/' class="btn">ABC 247 参加記</a></h2>
    <div class="article-meta clearfix">
        <ul class="dates clearfix left control">
            <li><i class="icon icon-date"></i></li>
            <li class="publish-date">
                <time datetime="2022.04.11">2022.04.11</time>
            </li>
        </ul>
        
        <ul class="article-categories clearfix left control">
            <li><i class="icon icon-categories"></i></li>
            
            <li>
                <a href="https://Kyo-s-s.github.io/blog/categories/%E7%AB%B6%E6%8A%80%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/" class="btn">競技プログラミング</a>
            </li>
            
        </ul>
        
        
        <div class="article-meta-splitter clearfix"></div>
        <ul class="article-tags clearfix control">
            <li><i class="icon icon-tags"></i></li>
            
            <li>
                <a href="https://Kyo-s-s.github.io/blog/tags/abc/" class="btn">ABC</a>
            </li>
            
        </ul>
        
    </div>
    <div class="content">
        
        <p>94分6完(3ペナ)でした。575位、パフォーマンスは1757です。</p>
<h2 id="a-move-righthttpsatcoderjpcontestsabc247tasksabc247_a">A <a href="https://atcoder.jp/contests/abc247/tasks/abc247_a">Move Right</a></h2>
<h4 id="問題">問題</h4>
<blockquote>
<p>0, 1からなる4文字の文字列$S$が渡されます。1つ右にシフトしてください。</p>
</blockquote>
<h4 id="提出コード">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    string S; cin <span style="color:#f92672">&gt;&gt;</span> S;
    
    string T <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0&#34;</span>;
    rep(i, <span style="color:#ae81ff">3</span>) T.pb(S[i]);
    cout <span style="color:#f92672">&lt;&lt;</span> T <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#39;\n&#39;</span>;

}
</code></pre></div><h4 id="acコード">ACコード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    
	bitset<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">4</span><span style="color:#f92672">&gt;</span> S; cin <span style="color:#f92672">&gt;&gt;</span> S;
	S <span style="color:#f92672">&gt;&gt;=</span> <span style="color:#ae81ff">1</span>;
	cout <span style="color:#f92672">&lt;&lt;</span> S <span style="color:#f92672">&lt;&lt;</span> endl;

}
</code></pre></div><p><code>bitset</code>で入力を受け取るととても簡潔に書けますね、知りませんでした。</p>
<h2 id="b-unique-nicknameshttpsatcoderjpcontestsabc247tasksabc247_b">B <a href="https://atcoder.jp/contests/abc247/tasks/abc247_b">Unique Nicknames</a></h2>
<h4 id="問題-1">問題</h4>
<blockquote>
<p>$N$人の人がいて、人$i$の姓は$s_i$、 名は$t_i$です。それぞれにあだ名をつけます。人$i$あだ名は、</p>
<ul>
<li>
<p>$s_i$か$t_i$のいずれかである</p>
</li>
<li>
<p>自分以外の人の姓/名と一致しない</p>
</li>
</ul>
<p>を満たす必要があります。全員にあだ名をつけることはできますか？</p>
<ul>
<li>$2 \leq N \leq 100$、$N$は整数</li>
<li>$s_i, t_i$は英小文字からなる1文字以上10文字以下の文字列</li>
</ul>
</blockquote>
<h4 id="考察">考察</h4>
<p>適当に書いてペナを食らいました。$s_i = t_i$の時にいやなきもちになるので、気を付けて書きます。</p>
<h4 id="提出コード-1">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll N; cin <span style="color:#f92672">&gt;&gt;</span> N;

    vs S(N), T(N);
    rep(i, N){
        cin <span style="color:#f92672">&gt;&gt;</span> S[i] <span style="color:#f92672">&gt;&gt;</span> T[i];
    }

    rep(i, N){
		<span style="color:#75715e">//人iにあだ名をつけれるか？
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">bool</span> pass <span style="color:#f92672">=</span> false;

        {
            <span style="color:#75715e">//姓をあだ名にした場合
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">bool</span> ok <span style="color:#f92672">=</span> true;
            string nic <span style="color:#f92672">=</span> S[i];

            rep(j, N) <span style="color:#66d9ef">if</span>(i <span style="color:#f92672">!=</span> j){
                <span style="color:#66d9ef">if</span>(S[j] <span style="color:#f92672">==</span> nic) ok <span style="color:#f92672">=</span> false;
                <span style="color:#66d9ef">if</span>(T[j] <span style="color:#f92672">==</span> nic) ok <span style="color:#f92672">=</span> false;
            }

            <span style="color:#66d9ef">if</span>(ok){
                pass <span style="color:#f92672">=</span> true;
            }
        }

        {
            <span style="color:#75715e">//名をあだ名にした場合
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">bool</span> ok <span style="color:#f92672">=</span> true;
            string nic <span style="color:#f92672">=</span> T[i];

            rep(j, N) <span style="color:#66d9ef">if</span>(i <span style="color:#f92672">!=</span> j){
                <span style="color:#66d9ef">if</span>(S[j] <span style="color:#f92672">==</span> nic) ok <span style="color:#f92672">=</span> false;
                <span style="color:#66d9ef">if</span>(T[j] <span style="color:#f92672">==</span> nic) ok <span style="color:#f92672">=</span> false;
            }

            <span style="color:#66d9ef">if</span>(ok){
                pass <span style="color:#f92672">=</span> true;
            }
        }

        <span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span>pass){
            YesNo(false); exit(<span style="color:#ae81ff">0</span>);
        }
    }

    YesNo(true);
}
</code></pre></div><h2 id="c-1-2-1-3-1-2-1httpsatcoderjpcontestsabc247tasksabc247_c">C <a href="https://atcoder.jp/contests/abc247/tasks/abc247_c">1 2 1 3 1 2 1</a></h2>
<h4 id="問題-2">問題</h4>
<blockquote>
<p>列$S_n$を次のように定義します。</p>
<ul>
<li>
<p>$S_1$は1つの1からなる長さ1の列</p>
</li>
<li>
<p>$S_n(n \geq 2)$は$S_{n-1}, n, S_{n-1}$を順につなげた列</p>
</li>
</ul>
<p>$N$が与えられるので、$S_N$を出力してください。</p>
<ul>
<li>$N \leq 16$</li>
</ul>
</blockquote>
<h4 id="考察-1">考察</h4>
<p>最初問題文を読んだ時には「再帰してください」と書いてあったのに、コンテスト終了後に再度読んだら「順にやってください」と書いてありました。再帰をするより順にやった方がコード記述量が少なくなります。</p>
<h4 id="提出コード-2">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    
    ll N; cin <span style="color:#f92672">&gt;&gt;</span> N;
    
    map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;</span> memo;

    <span style="color:#66d9ef">auto</span> dfs <span style="color:#f92672">=</span> [<span style="color:#f92672">&amp;</span>](<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;&amp;</span> self, ll x) <span style="color:#f92672">-&gt;</span> vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> {
        <span style="color:#66d9ef">if</span>(memo.find(x) <span style="color:#f92672">!=</span> memo.end()) <span style="color:#66d9ef">return</span> memo[x];

        <span style="color:#66d9ef">if</span>(x <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>){
            <span style="color:#66d9ef">return</span> {<span style="color:#ae81ff">1</span>};
        }

        <span style="color:#66d9ef">auto</span> B <span style="color:#f92672">=</span> self(self, x <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
        vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> ret <span style="color:#f92672">=</span> B;
        ret.pb(x);
        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> b: B) ret.pb(b);

        <span style="color:#66d9ef">return</span> memo[x] <span style="color:#f92672">=</span> ret;

    };

    <span style="color:#66d9ef">auto</span> ans <span style="color:#f92672">=</span> dfs(dfs, N);

    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> ans.size(); i<span style="color:#f92672">++</span>){
        cout <span style="color:#f92672">&lt;&lt;</span> ans[i] <span style="color:#f92672">&lt;&lt;</span> (i <span style="color:#f92672">!=</span> ans.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;\n&#39;</span>);
    }

}
</code></pre></div><h4 id="acコード-1">ACコード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll N; cin <span style="color:#f92672">&gt;&gt;</span> N;
    
    vi ans <span style="color:#f92672">=</span> {};
    rrep(i, N){
        vi nxt;

        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> a: ans) nxt.pb(a);
        nxt.pb(i);
        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> a: ans) nxt.pb(a);

        swap(ans, nxt);
    }

    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> ans.size(); i<span style="color:#f92672">++</span>){
        cout <span style="color:#f92672">&lt;&lt;</span> ans[i] <span style="color:#f92672">&lt;&lt;</span> (i <span style="color:#f92672">!=</span> ans.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39; &#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;\n&#39;</span>);
    }

}
</code></pre></div><h2 id="d-cylinderhttpsatcoderjpcontestsabc247tasksabc247_d">D <a href="https://atcoder.jp/contests/abc247/tasks/abc247_d">Cylinder</a></h2>
<h4 id="問題-3">問題</h4>
<blockquote>
<p>空の筒があります。クエリが$Q$個くるのでさばいてください。</p>
<ul>
<li><code>1 x c</code> : 数$x$が書かれたボールを右側から$c$個入れる</li>
<li><code>2 c</code> : 筒の左側からボールを$c$個取り出し、取り出したボールに書かれている数の合計を出力</li>
<li>$1 \leq Q \leq 2 \times 10^5$</li>
<li>$0 \leq x \leq 10^9$</li>
<li>$1 \leq c \leq 10^9$</li>
</ul>
</blockquote>
<h4 id="考察-2">考察</h4>
<p>そのままやります。ボールを$c$個実際に入れることはできないので、圧縮します。</p>
<h4 id="提出コード-3">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll Q; cin <span style="color:#f92672">&gt;&gt;</span> Q;

    deque<span style="color:#f92672">&lt;</span>pll<span style="color:#f92672">&gt;</span> que;

    rep(q, Q){
        <span style="color:#66d9ef">int</span> t; cin <span style="color:#f92672">&gt;&gt;</span> t;

        <span style="color:#66d9ef">if</span>(t <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>){
            ll x, c; cin <span style="color:#f92672">&gt;&gt;</span> x <span style="color:#f92672">&gt;&gt;</span> c;
            que.pb({x, c});
        }<span style="color:#66d9ef">else</span>{
            ll c; cin <span style="color:#f92672">&gt;&gt;</span> c;
            ll ret <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

            <span style="color:#66d9ef">while</span>(c <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>){

                <span style="color:#66d9ef">auto</span> [hx, hc] <span style="color:#f92672">=</span> que.front();

                ll po <span style="color:#f92672">=</span> min(c, hc);	<span style="color:#75715e">//取り出した数
</span><span style="color:#75715e"></span>                ret <span style="color:#f92672">+=</span> hx <span style="color:#f92672">*</span> po;
                que.front().se <span style="color:#f92672">-=</span> po;
                c <span style="color:#f92672">-=</span> po;

                <span style="color:#66d9ef">if</span>(que.front().se <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>){ <span style="color:#75715e">//一番左にいるボールが0個になったとき
</span><span style="color:#75715e"></span>                    que.pop_front();
                }
                
            }

            cout <span style="color:#f92672">&lt;&lt;</span> ret <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#39;\n&#39;</span>;
        }
    }    
}
</code></pre></div><h2 id="e-max-minhttpsatcoderjpcontestsabc247tasksabc247_e">E <a href="https://atcoder.jp/contests/abc247/tasks/abc247_e">Max Min</a></h2>
<h4 id="問題-4">問題</h4>
<blockquote>
<p>長さ$N$の数列$A$、$X, Y$があります。次の条件をすべて満たす整数の組$(L, R)$の個数を求めてください。</p>
<ul>
<li>$1 \leq L \leq R \leq N$</li>
<li>$A_L, A_{L+1}, \cdots, A_{R}$の最大値は$X$であり最小値は$Y$である。</li>
<li>$1 \leq N \leq 2 \times 10 ^ 5$</li>
<li>$1 \leq A_i \leq 2 \times 10^5$</li>
<li>$1 \leq Y \leq X \leq 2 \times 10 ^ 5$</li>
<li>入力される値はすべて整数</li>
</ul>
</blockquote>
<h4 id="考察-3">考察</h4>
<p>順に数列を見ていきます。見ていく中で$X, Y$が現れる最近のインデックスと範囲外($X$より大きいか$Y$より小さいか)が現れる最近のインデックスを覚えておきます。$X, Y$が現れる最近のインデックスを$xi$, $yi$、範囲外が現れる最近のインデックスを$oi$とします。$i$番目が右端になるときの条件を満たす区間を数えていきます。</p>
<ul>
<li>
<p>$A_i = X$の場合</p>
<p>$xi$を$i$に更新します。</p>
<p>答えに$yi - oi$を足せばよいです。右端を$i$とすると左端の最小は$oi$に、最大は$yi$となり、その間はどこを左端にしてもよいからです。</p>
</li>
<li>
<p>$A_i = Y$の場合</p>
<p>$yi$を$i$に更新します。</p>
<p>答えに$xi - oi$を足せばよいです。</p>
</li>
<li>
<p>$Y \leq A_i \leq X$の場合</p>
<p>答えに$\min(xi, yi) - oi$を足せばよいです。右端を$i$とすると左端の最小は$oi$に、最大は$\min(xi, yi)$となり、その間はどこを左端にしてもよいからです。</p>
</li>
<li>
<p>それ以外の場合</p>
<p>$oi, xi, yi$を更新します。$oi$を$i$に、$x_i, y_i$はnullとなります。</p>
</li>
</ul>
<p>$xi, yi$がnullの時に注意してください。提出コードでは<code>x</code>,<code>y</code>という変数を用意し、nullかどうかを見ています。</p>
<h4 id="提出コード-4">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll N, X, Y; cin <span style="color:#f92672">&gt;&gt;</span> N <span style="color:#f92672">&gt;&gt;</span> X <span style="color:#f92672">&gt;&gt;</span> Y;
    vector<span style="color:#f92672">&lt;</span>ll<span style="color:#f92672">&gt;</span> A(N); <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> N; i<span style="color:#f92672">++</span>) cin <span style="color:#f92672">&gt;&gt;</span> A[i];
    
    ll ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

    ll x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;	<span style="color:#75715e">// 0 -&gt; null
</span><span style="color:#75715e"></span>    ll xi, yi;
    ll idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    ll oi <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> a: A){
        
        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">&gt;</span> X <span style="color:#f92672">||</span> Y <span style="color:#f92672">&gt;</span> a){
            x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
            oi <span style="color:#f92672">=</span> idx;
        }

        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">==</span> X){
            xi <span style="color:#f92672">=</span> idx;
            x<span style="color:#f92672">++</span>;
        }
        
        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">==</span> Y){
            yi <span style="color:#f92672">=</span> idx;
            y<span style="color:#f92672">++</span>;
        }

        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">==</span> X){
            <span style="color:#66d9ef">if</span>(y <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) ans <span style="color:#f92672">+=</span> yi <span style="color:#f92672">-</span> oi;
        }elif(a <span style="color:#f92672">==</span> Y){
            <span style="color:#66d9ef">if</span>(x <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) ans <span style="color:#f92672">+=</span> xi <span style="color:#f92672">-</span> oi;
        }elif(<span style="color:#f92672">!</span>(a <span style="color:#f92672">&gt;</span> X <span style="color:#f92672">||</span> Y <span style="color:#f92672">&gt;</span> a)){
            <span style="color:#66d9ef">if</span>(x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> y <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) ans <span style="color:#f92672">+=</span> min(xi, yi) <span style="color:#f92672">-</span> oi;
        }

        idx<span style="color:#f92672">++</span>;
    }

    cout <span style="color:#f92672">&lt;&lt;</span> ans <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#39;\n&#39;</span>;

}
</code></pre></div><p>&hellip;<code>ans</code>に加算するところの条件分岐、$A_i$が$X$以下$Y$以上の時は$\min(xi, yi) - oi$を加算、でよくないですか？($A_i$が$X, Y$だった場合、$xi, yi$が今のインデックスに更新されるため) ということで書き直しました。</p>
<h4 id="acコード-2">ACコード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll N, X, Y; cin <span style="color:#f92672">&gt;&gt;</span> N <span style="color:#f92672">&gt;&gt;</span> X <span style="color:#f92672">&gt;&gt;</span> Y;
    vector<span style="color:#f92672">&lt;</span>ll<span style="color:#f92672">&gt;</span> A(N); <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> N; i<span style="color:#f92672">++</span>) cin <span style="color:#f92672">&gt;&gt;</span> A[i];
    

    ll ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

    ll xi <span style="color:#f92672">=</span> INF, yi <span style="color:#f92672">=</span> INF;	<span style="color:#75715e">//INF -&gt; null
</span><span style="color:#75715e"></span>    ll idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    ll oi <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> a: A){
        
        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">&gt;</span> X <span style="color:#f92672">||</span> Y <span style="color:#f92672">&gt;</span> a){
            xi <span style="color:#f92672">=</span> INF;
            yi <span style="color:#f92672">=</span> INF;
            oi <span style="color:#f92672">=</span> idx;
        }

        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">==</span> X){
            xi <span style="color:#f92672">=</span> idx;
        }
        
        <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">==</span> Y){
            yi <span style="color:#f92672">=</span> idx;
        }


        <span style="color:#66d9ef">if</span>(X <span style="color:#f92672">&gt;=</span> a <span style="color:#f92672">&amp;&amp;</span> a <span style="color:#f92672">&gt;=</span> Y){
            <span style="color:#66d9ef">if</span>(xi <span style="color:#f92672">!=</span> INF <span style="color:#f92672">&amp;&amp;</span> yi <span style="color:#f92672">!=</span> INF) ans <span style="color:#f92672">+=</span> min(xi, yi) <span style="color:#f92672">-</span> oi;
        }

        idx<span style="color:#f92672">++</span>;
    }

    cout <span style="color:#f92672">&lt;&lt;</span> ans <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#39;\n&#39;</span>;

}
</code></pre></div><h2 id="f-cardshttpsatcoderjpcontestsabc247tasksabc247_f">F <a href="https://atcoder.jp/contests/abc247/tasks/abc247_f">Cards</a></h2>
<h4 id="問題-5">問題</h4>
<blockquote>
<p>$1, \cdots, N$の番号がついた$N$枚のカードがあり、カード$i$の表には$P_i$が、裏には$Q_i$が書かれています。ここで、$P, Q$は$1, \cdots, N$の並び替えです。$N$枚のカードから何枚かを選ぶ方法のうち、次の条件を満たすものは何通りありますか？998244353で割ったあまりをもとめてください。</p>
<ul>
<li>$1, \cdots, N$のどの数も選んだカードのいずれかに書かれている</li>
<li>$1 \leq N \leq 2 \times 10 ^ 5$</li>
</ul>
</blockquote>
<h4 id="考察-4">考察</h4>
<p>サンプル1を考えます。</p>
<blockquote>
<p>3</p>
<p>1 2 3</p>
<p>2 1 3</p>
</blockquote>
<p>3枚目のカードは、表裏ともに3が書かれています。このカードを選ばないと条件を満たさなくなるため、選ぶことが確定します。</p>
<p>1, 2枚目のカードは、両方選ぶ/どちらか一方を選ばない ことが可能です。よってこのサンプルの解は3通りとなります。</p>
<p>$P, Q$は$1, \cdots, N$の並び替えなので、</p>
<blockquote>
<p>a b c d e</p>
<p>b c d e a</p>
</blockquote>
<p>のような組に分けることができます。この組に対して、何通りの取り方ができるかを求めることができればよいです。これを求めます。</p>
<ul>
<li>
<p>組の枚数が1枚のとき</p>
<p>具体的には、</p>
<blockquote>
<p>a</p>
<p>a</p>
</blockquote>
<p>のような場合です。この場合はこのカードを選ばなくてはならないため、1通りです。</p>
</li>
<li>
<p>組の枚数が2枚のとき</p>
<p>具体的には、</p>
<blockquote>
<p>a b</p>
<p>b a</p>
</blockquote>
<p>のような場合です。この場合は両方選ぶ/どちらか一方を選ばない の3通りが可能です。</p>
</li>
<li>
<p>組の枚数が3枚のとき</p>
<p>具体的には、</p>
<blockquote>
<p>a b c</p>
<p>b c a</p>
</blockquote>
<p>のような場合です。この場合について考えてみます。</p>
<ul>
<li>1枚目を選ぶ場合
<ul>
<li>2枚目を選び、3枚目を選ぶ</li>
<li>2枚目を選び、3枚目を選ばない</li>
<li>2枚目を選ばず、3枚目を選ぶ</li>
</ul>
</li>
<li>1枚目を選ばない場合
<ul>
<li>2枚目を選び、3枚目を選ぶ</li>
</ul>
</li>
</ul>
<p>の4通りです。</p>
<p>ここから、</p>
</li>
<li>
<p>$i$番目のカードを選んだ場合、$i+1$番目ではカードを選ぶ/選ばない の2通りが可能</p>
</li>
<li>
<p>$i$番目のカードを選ばなかった場合、$i+1$番目のカードは必ず選ばなくてはならない</p>
</li>
</ul>
<p>ということがわかります。このような選び方を考えていけばよいです。これはDPをすればよいです。</p>
<p>$N$番目の次のカードは1番目であることに注意してください。1番目を選んだ場合と選ばなかった場合で場合分けします。</p>
<ul>
<li>
<p>$1$枚目を選んだ場合 : $N$枚目のカードを選ぶ/選ばない が可能</p>
<table>
<thead>
<tr>
<th></th>
<th>1枚目</th>
<th>2枚目</th>
<th>3枚目</th>
<th>4枚目</th>
<th>5枚目</th>
<th>6枚目</th>
</tr>
</thead>
<tbody>
<tr>
<td>選ぶ</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
</tr>
<tr>
<td>選ばない</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>1枚目を選ばなかった場合 : $N$枚目のカードを選ぶ のみ可能</p>
<table>
<thead>
<tr>
<th></th>
<th>1枚目</th>
<th>2枚目</th>
<th>3枚目</th>
<th>4枚目</th>
<th>5枚目</th>
<th>6枚目</th>
</tr>
</thead>
<tbody>
<tr>
<td>選ぶ</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
</tr>
<tr>
<td>選ばない</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>これらをかけていけばよいです。</p>
<h4 id="提出コード-5">提出コード</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">using</span> mint <span style="color:#f92672">=</span>  modint998244353;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){

    ll N; cin <span style="color:#f92672">&gt;&gt;</span> N;
    vector<span style="color:#f92672">&lt;</span>ll<span style="color:#f92672">&gt;</span> P(N); <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> N; i<span style="color:#f92672">++</span>) cin <span style="color:#f92672">&gt;&gt;</span> P[i];
    vector<span style="color:#f92672">&lt;</span>ll<span style="color:#f92672">&gt;</span> Q(N); <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> N; i<span style="color:#f92672">++</span>) cin <span style="color:#f92672">&gt;&gt;</span> Q[i];
    
    dsu uf(N);

    rep(i, N) uf.marge(P[i] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, Q[i] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);

    vvi ret <span style="color:#f92672">=</span> uf.groups();

    mint ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;

    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">auto</span> r: ret) <span style="color:#66d9ef">if</span>(r.size() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>){
        
        mint k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#75715e">//1枚目を選ぶ場合
</span><span style="color:#75715e"></span>        {
            pair<span style="color:#f92672">&lt;</span>mint, mint<span style="color:#f92672">&gt;</span> dp <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>};
            rep(i, r.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>){
                dp <span style="color:#f92672">=</span> {dp.fi <span style="color:#f92672">+</span> dp.se, dp.fi};
            }
            k <span style="color:#f92672">+=</span> dp.fi <span style="color:#f92672">+</span> dp.se;
        }

        <span style="color:#75715e">//1枚目を選ばない場合
</span><span style="color:#75715e"></span>        {
            pair<span style="color:#f92672">&lt;</span>mint, mint<span style="color:#f92672">&gt;</span> dp <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>};
            rep(i, r.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>){
                dp <span style="color:#f92672">=</span> {dp.fi <span style="color:#f92672">+</span> dp.se, dp.fi};
            }
            k <span style="color:#f92672">+=</span> dp.fi;
        }

        ans <span style="color:#f92672">*=</span> k;

    }
    
    cout <span style="color:#f92672">&lt;&lt;</span> ans.val() <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#39;\n&#39;</span>;

}
</code></pre></div><p>1枚目を選ぶDPと選ばないDPですが、選んだ場合の2枚目以降と選ばなかった場合の3枚目以降は同じです。よってこれらはまとめることができます。これらをまとめると公式解説の式が導けます。きれいですね(DPをしても十分通る制約なのでDPをしてもよいです)。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">できませんでした。敗因はこの秋刀魚が半額だったからだと思われます。 <a href="https://t.co/at5VD2TnGM">https://t.co/at5VD2TnGM</a></p>&mdash; きょ　インタラクティブ問題ではフラッシュする！ (@Kyo_s_s) <a href="https://twitter.com/Kyo_s_s/status/1513155802089259010?ref_src=twsrc%5Etfw">April 10, 2022</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>次のABCで入青したいです。</p>

        
    </div>

</article>
<section class="comment">
    <p class="local-info">
        Comment is disabled to avoid unwanted discussions from 'localhost:1313' on your Disqus
        account...
    </p>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">

    (function () {
        if (window.location.hostname == "localhost") {
            return
        }
        document.querySelector('.local-info').classList.add('hide')

        let dsq = document.createElement('script')
        dsq.type = 'text/javascript'
        dsq.async = true
        let disqus_shortname = 'your disqus short name'
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
    })()
</script>


        </main>
    </div>
    <footer class="footer clearfix">
    <ul class="control social clearfix">
        <li><a class="author btn" href="#">Kyo</a></li>
        
        
        
        
        
        
        
        
        <li>
            <a class="icon-link btn" href="https://github.com/Kyo-s-s"><i class="icon github"></i></a>
        </li>
        
        
        
        <li>
            <a class="icon-link btn" href="https://twitter.com/Kyo_s_s"><i class="icon twitter"></i></a>
        </li>
        
        
        <li>
            <a class="icon-link btn" href="https://Kyo-s-s.github.io/blog/index.xml" type="application/rss+xml" title="rss">
                <i class="rss icon"></i></a>
        </li>
    </ul>

    <ul class="control status clearfix">
        <li><a href="#" class="btn">Posts:
                17</a>
        </li>
        <li><a href="#" class="btn">Pages:
                0</a></li>
        <li><a href="#" class="btn">en</a></li>
        <li><a href="https://gohugo.io" class="btn">Hugo: 0.68.3</a></li>
        <li><a href="https://github.com/sfengyuan/edidor" class="btn">Theme: Edidor</a></li>
        <li>
            
                <a href="#" class="btn">Last build: <time
                    datetime="2020-03-25T06:15:45Z">2020-03-25T06:15:45Z</time>
                </a>
            
        </li>
    </ul>
</footer>
<div class="dialog">
    <div class="wrapper">
        <div class="clearfix"><button class="btn close-dialog">X</button></div>
        <header>
            <h1 class="title">Theme Name</h1>
        </header>
        <main>
            <div class="clearfix">
                <label for="theme-name">
                    <p>Only English Character, space, hyphen are allowed!</p>
                    <p>Valid name examples: "custom", "fantastic theme", "my-theme"</p>
                    <p>Invalid name examles: "我的主题", ":)", "123"</p>
                </label>
                <input type="text" name="theme-name" id="theme-name">
            </div>
            <div class="clearfix">
                <button class="btn export">Export</button>
            </div>

        </main>
        <footer></footer>
    </div>
</div>

    <script src="https://Kyo-s-s.github.io/blog/js/main.js"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'your ga id', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
